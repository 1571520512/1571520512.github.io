<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha256-CTSx/A06dm1B063156EVh15m6Y67pAjZZaQc89LLSrU=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"camilleferros.top","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.18.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="article">
<meta property="og:title" content="C++Primer_课后习题第七章">
<meta property="og:url" content="https://camilleferros.top/2020/12/14/C++Primer-%E8%AF%BE%E5%90%8E%E4%B9%A0%E9%A2%98-07/index.html">
<meta property="og:site_name" content="Camille">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200718171442758.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0h1YW5ncGVuZ3l1MTIz,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200718171510537.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0h1YW5ncGVuZ3l1MTIz,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200721192429579.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0h1YW5ncGVuZ3l1MTIz,size_16,color_FFFFFF,t_70">
<meta property="article:published_time" content="2020-12-14T02:14:27.000Z">
<meta property="article:modified_time" content="2020-12-14T02:15:14.753Z">
<meta property="article:author" content="Camille">
<meta property="article:tag" content="C++Primer">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img-blog.csdnimg.cn/20200718171442758.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0h1YW5ncGVuZ3l1MTIz,size_16,color_FFFFFF,t_70">


<link rel="canonical" href="https://camilleferros.top/2020/12/14/C++Primer-%E8%AF%BE%E5%90%8E%E4%B9%A0%E9%A2%98-07/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://camilleferros.top/2020/12/14/C++Primer-%E8%AF%BE%E5%90%8E%E4%B9%A0%E9%A2%98-07/","path":"2020/12/14/C++Primer-课后习题-07/","title":"C++Primer_课后习题第七章"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>C++Primer_课后习题第七章 | Camille</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Camille</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">你得先看重自己,否则别人就会当你一钱不值</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E9%9D%A2%E7%AB%A0%E8%8A%82%E7%9A%84%E4%B9%A0%E9%A2%98%E7%AD%94%E6%A1%88"><span class="nav-number">1.</span> <span class="nav-text">前面章节的习题答案</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-1"><span class="nav-number"></span> <span class="nav-text">7.1</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-2"><span class="nav-number"></span> <span class="nav-text">7.2</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-3"><span class="nav-number"></span> <span class="nav-text">7.3</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-4"><span class="nav-number"></span> <span class="nav-text">7.4</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-5"><span class="nav-number"></span> <span class="nav-text">7.5</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-6"><span class="nav-number"></span> <span class="nav-text">7.6</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-7"><span class="nav-number"></span> <span class="nav-text">7.7</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-8"><span class="nav-number"></span> <span class="nav-text">7.8</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-9"><span class="nav-number"></span> <span class="nav-text">7.9</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-10"><span class="nav-number"></span> <span class="nav-text">7.10</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-11"><span class="nav-number"></span> <span class="nav-text">7.11</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-12"><span class="nav-number"></span> <span class="nav-text">7.12</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-13"><span class="nav-number"></span> <span class="nav-text">7.13</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-14"><span class="nav-number"></span> <span class="nav-text">7.14</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-15"><span class="nav-number"></span> <span class="nav-text">7.15</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-16"><span class="nav-number"></span> <span class="nav-text">7.16</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-17"><span class="nav-number"></span> <span class="nav-text">7.17</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-18"><span class="nav-number"></span> <span class="nav-text">7.18</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-19"><span class="nav-number"></span> <span class="nav-text">7.19</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-20"><span class="nav-number"></span> <span class="nav-text">7.20</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-21"><span class="nav-number"></span> <span class="nav-text">7.21</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-22"><span class="nav-number"></span> <span class="nav-text">7.22</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-23"><span class="nav-number"></span> <span class="nav-text">7.23</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-24"><span class="nav-number"></span> <span class="nav-text">7.24</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-25"><span class="nav-number"></span> <span class="nav-text">7.25</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-26"><span class="nav-number"></span> <span class="nav-text">7.26</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9A%90%E5%BC%8F%E7%9A%84%E5%86%85%E8%81%94"><span class="nav-number">1.</span> <span class="nav-text">隐式的内联</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%98%BE%E7%A4%BA%E7%9A%84%E5%86%85%E8%81%94"><span class="nav-number">2.</span> <span class="nav-text">显示的内联</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-27"><span class="nav-number"></span> <span class="nav-text">7.27</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-28-7-29"><span class="nav-number"></span> <span class="nav-text">7.28+7.29</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-30"><span class="nav-number"></span> <span class="nav-text">7.30</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-31"><span class="nav-number"></span> <span class="nav-text">7.31</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-32"><span class="nav-number"></span> <span class="nav-text">7.32</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-33"><span class="nav-number"></span> <span class="nav-text">7.33</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-34"><span class="nav-number"></span> <span class="nav-text">7.34</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-35"><span class="nav-number"></span> <span class="nav-text">7.35</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-36"><span class="nav-number"></span> <span class="nav-text">7.36</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-37"><span class="nav-number"></span> <span class="nav-text">7.37</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-38"><span class="nav-number"></span> <span class="nav-text">7.38</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-39"><span class="nav-number"></span> <span class="nav-text">7.39</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-40"><span class="nav-number"></span> <span class="nav-text">7.40</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-41"><span class="nav-number"></span> <span class="nav-text">7.41</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-42"><span class="nav-number"></span> <span class="nav-text">7.42</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-43"><span class="nav-number"></span> <span class="nav-text">7.43</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-44"><span class="nav-number"></span> <span class="nav-text">7.44</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-45"><span class="nav-number"></span> <span class="nav-text">7.45</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-46"><span class="nav-number"></span> <span class="nav-text">7.46</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-47"><span class="nav-number"></span> <span class="nav-text">7.47</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-48"><span class="nav-number"></span> <span class="nav-text">7.48</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-49"><span class="nav-number"></span> <span class="nav-text">7.49</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-50"><span class="nav-number"></span> <span class="nav-text">7.50</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-51"><span class="nav-number"></span> <span class="nav-text">7.51</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-52"><span class="nav-number"></span> <span class="nav-text">7.52</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-53"><span class="nav-number"></span> <span class="nav-text">7.53</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-54"><span class="nav-number"></span> <span class="nav-text">7.54</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-55"><span class="nav-number"></span> <span class="nav-text">7.55</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-56"><span class="nav-number"></span> <span class="nav-text">7.56</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-57"><span class="nav-number"></span> <span class="nav-text">7.57</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-58"><span class="nav-number"></span> <span class="nav-text">7.58</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AF%BC%E5%9B%BE"><span class="nav-number"></span> <span class="nav-text">导图</span></a></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Camille</p>
  <div class="site-description" itemprop="description">效率，是成功的核心关键</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">237</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">29</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">67</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://camilleferros.top/2020/12/14/C++Primer-%E8%AF%BE%E5%90%8E%E4%B9%A0%E9%A2%98-07/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Camille">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Camille">
      <meta itemprop="description" content="效率，是成功的核心关键">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="C++Primer_课后习题第七章 | Camille">
      <meta itemprop="description" content=" ">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          C++Primer_课后习题第七章
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2020-12-14 10:14:27 / Modified: 10:15:14" itemprop="dateCreated datePublished" datetime="2020-12-14T10:14:27+08:00">2020-12-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/C-Primer/" itemprop="url" rel="index"><span itemprop="name">C++Primer</span></a>
        </span>
    </span>

  
</div>

            <div class="post-description"> </div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>本文答案,部分参考于C++ Primer 习题集</p>
<h2 id="前面章节的习题答案"><a href="#前面章节的习题答案" class="headerlink" title="前面章节的习题答案"></a>前面章节的习题答案</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Huangpengyu123/article/details/106605401">第一章</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Huangpengyu123/article/details/106825290">第二章</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Huangpengyu123/article/details/107029235">第三章</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Huangpengyu123/article/details/107086463">第四章</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Huangpengyu123/article/details/107114342">第五章</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Huangpengyu123/article/details/107326689">第六章</a></p>
<h1 id="7-1"><a href="#7-1" class="headerlink" title="7.1"></a>7.1</h1><p><img src="https://img-blog.csdnimg.cn/20200718171442758.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0h1YW5ncGVuZ3l1MTIz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p><img src="https://img-blog.csdnimg.cn/20200718171510537.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0h1YW5ncGVuZ3l1MTIz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="7-2"><a href="#7-2" class="headerlink" title="7.2"></a>7.2</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Sales_data</span>&#123;</span><br><span class="line"><span class="keyword">private</span>:            <span class="comment">//定义私有数据成员</span></span><br><span class="line">    string bookNo;  <span class="comment">//书籍编号,隐式初始化为空串</span></span><br><span class="line">    <span class="type">unsigned</span> units_sold=<span class="number">0</span>;      <span class="comment">//销售量,显式初始化为0</span></span><br><span class="line">    <span class="type">double</span> sellingprice=<span class="number">0.0</span>;    <span class="comment">//原始价格,显式初始化为0</span></span><br><span class="line">    <span class="type">double</span> saleprice=<span class="number">0.0</span>;       <span class="comment">//实售价格,显式初始化为0.0</span></span><br><span class="line">    <span class="type">double</span> discount=<span class="number">0.0</span>;        <span class="comment">//折扣.显式初始化为0.0</span></span><br><span class="line"><span class="keyword">public</span>:             <span class="comment">//定义共有数据成员</span></span><br><span class="line">    <span class="comment">//isbn函数只有一条语句,返回bookNo</span></span><br><span class="line">    <span class="function">string <span class="title">isbn</span><span class="params">()</span> <span class="type">const</span> </span>&#123;<span class="keyword">return</span> bookNo;&#125;;</span><br><span class="line">    <span class="comment">//combine函数用于把两个ISBN相同的销售记录合并在一起.</span></span><br><span class="line">    <span class="function">Sales_data &amp; <span class="title">combine</span><span class="params">(<span class="type">const</span> Sales_data &amp;rhs)</span></span>&#123;</span><br><span class="line">        units_sold += rhs.units_sold;       <span class="comment">//累加书籍的销售量.</span></span><br><span class="line">        saleprice =(rhs.saleprice*rhs.units_sold+saleprice*units_sold)/(rhs.units_sold+units_sold);     <span class="comment">//重新计算实际销售价格</span></span><br><span class="line">        <span class="keyword">if</span>(saleprice!=<span class="number">0</span>)</span><br><span class="line">            discount=saleprice/sellingprice;                                                            <span class="comment">//重新计算实际折扣</span></span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;                                                                                   <span class="comment">//返回合并后的结果</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="7-3"><a href="#7-3" class="headerlink" title="7.3"></a>7.3</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;istream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Sale_data.h&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function">Sale_data <span class="title">add</span><span class="params">(<span class="type">const</span> Sale_data &amp;lhs,<span class="type">const</span> Sale_data &amp;rhs)</span></span>&#123;</span><br><span class="line">    Sale_data sum=lhs;</span><br><span class="line">    sum.<span class="built_in">combine</span>(rhs);</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">std::istream &amp;<span class="title">read</span><span class="params">(std::istream &amp;is,Sale_data &amp;item)</span></span>&#123;</span><br><span class="line">    is&gt;&gt;item.bookNo&gt;&gt;item.units_sold&gt;&gt;item.sellingprice&gt;&gt;item.saleprice;</span><br><span class="line">    <span class="keyword">return</span> ls;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">std::ostream &amp;<span class="title">print</span><span class="params">(std::ostream &amp;os,<span class="type">const</span> Sale_data &amp;item)</span></span>&#123;</span><br><span class="line">    os&lt;&lt;item.<span class="built_in">isbn</span>()&lt;&lt;<span class="string">&quot;&quot;</span>&lt;&lt;item.units_sold&lt;&lt;<span class="string">&quot;&quot;</span>&lt;&lt;item.sellingprice&lt;&lt;<span class="string">&quot;&quot;</span>&lt;&lt;item.saleprice&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;item.discount;</span><br><span class="line">    <span class="keyword">return</span> os;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;请输入交易记录(ISBN,销售量,原价,实际售价):&quot;</span>&lt;&lt;endl;   </span><br><span class="line">    Sale_data total;                                        <span class="comment">//保存下一条交易记录</span></span><br><span class="line">    <span class="comment">//读入第一条交易记录,并确保有数据可以处理</span></span><br><span class="line">    <span class="keyword">if</span>(cin&gt;&gt;total)&#123;</span><br><span class="line">        Sale_data trans;            <span class="comment">//保存和的变量</span></span><br><span class="line">        <span class="comment">//读入并处理剩余交易记录</span></span><br><span class="line">        <span class="keyword">while</span>(cin&gt;&gt;trans)&#123;</span><br><span class="line">            <span class="comment">//如果我们仍在处理相同的书</span></span><br><span class="line">            <span class="keyword">if</span>(total.<span class="built_in">isbn</span>()==trans.<span class="built_in">isbn</span>())</span><br><span class="line">                trans=<span class="built_in">add</span>(trans,total);</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//打印前一本书的结果</span></span><br><span class="line">                cout&lt;&lt;total&lt;&lt;endl;</span><br><span class="line">                total=trans;        <span class="comment">//total现在表示下一本书销售额</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//打印最后一本书的结果</span></span><br><span class="line">        cout&lt;&lt;total&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//没有输入!警告读者</span></span><br><span class="line">        cerr&lt;&lt;<span class="string">&quot;No data!?&quot;</span>&lt;&lt;endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>除了读入和输出不一样之外,其他的都是一样的.</p>
<h1 id="7-4"><a href="#7-4" class="headerlink" title="7.4"></a>7.4</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    string name=<span class="string">&quot;&quot;</span>;</span><br><span class="line">    string address=<span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="7-5"><a href="#7-5" class="headerlink" title="7.5"></a>7.5</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    string name=<span class="string">&quot;&quot;</span>;</span><br><span class="line">    string address=<span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="function">string <span class="title">get_name</span><span class="params">()</span> <span class="type">const</span>  </span>&#123;<span class="keyword">return</span> name;&#125;;</span><br><span class="line">    <span class="function">string <span class="title">get_address</span><span class="params">()</span> <span class="type">const</span> </span>&#123;<span class="keyword">return</span> address&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>应该是const 类的.因为姓名和地址一般都是不可以改变的变量.</p>
<h1 id="7-6"><a href="#7-6" class="headerlink" title="7.6"></a>7.6</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Sale_data <span class="title">add</span><span class="params">(<span class="type">const</span> Sale_data &amp;lhs,<span class="type">const</span> Sale_data &amp;rhs)</span></span>&#123;</span><br><span class="line">    Sale_data sum=lhs;</span><br><span class="line">    sum.<span class="built_in">combine</span>(rhs);</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">std::istream &amp;<span class="title">read</span><span class="params">(std::istream &amp;is,Sale_data &amp;item)</span></span>&#123;</span><br><span class="line">    is&gt;&gt;item.bookNo&gt;&gt;item.units_sold&gt;&gt;item.sellingprice&gt;&gt;item.saleprice;</span><br><span class="line">    <span class="keyword">return</span> ls;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">std::ostream &amp;<span class="title">print</span><span class="params">(std::ostream &amp;os,<span class="type">const</span> Sale_data &amp;item)</span></span>&#123;</span><br><span class="line">    os&lt;&lt;item.<span class="built_in">isbn</span>()&lt;&lt;<span class="string">&quot;&quot;</span>&lt;&lt;item.units_sold&lt;&lt;<span class="string">&quot;&quot;</span>&lt;&lt;item.sellingprice&lt;&lt;<span class="string">&quot;&quot;</span>&lt;&lt;item.saleprice&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;item.discount;</span><br><span class="line">    <span class="keyword">return</span> os;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="7-7"><a href="#7-7" class="headerlink" title="7.7"></a>7.7</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;istream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function">Sale_data <span class="title">add</span><span class="params">(<span class="type">const</span> Sale_data &amp;lhs,<span class="type">const</span> Sale_data &amp;rhs)</span></span>&#123;</span><br><span class="line">    Sale_data sum=lhs;</span><br><span class="line">    sum.<span class="built_in">combine</span>(rhs);</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">std::istream &amp;<span class="title">read</span><span class="params">(std::istream &amp;is,Sale_data &amp;item)</span></span>&#123;</span><br><span class="line">    is&gt;&gt;item.bookNo&gt;&gt;item.units_sold&gt;&gt;item.sellingprice&gt;&gt;item.saleprice;</span><br><span class="line">    <span class="keyword">return</span> ls;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">std::ostream &amp;<span class="title">print</span><span class="params">(std::ostream &amp;os,<span class="type">const</span> Sale_data &amp;item)</span></span>&#123;</span><br><span class="line">    os&lt;&lt;item.<span class="built_in">isbn</span>()&lt;&lt;<span class="string">&quot;&quot;</span>&lt;&lt;item.units_sold&lt;&lt;<span class="string">&quot;&quot;</span>&lt;&lt;item.sellingprice&lt;&lt;<span class="string">&quot;&quot;</span>&lt;&lt;item.saleprice&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;item.discount;</span><br><span class="line">    <span class="keyword">return</span> os;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;请输入交易记录(ISBN,销售量,原价,实际售价):&quot;</span>&lt;&lt;endl;   </span><br><span class="line">    Sale_data total;                                        <span class="comment">//保存下一条交易记录</span></span><br><span class="line">    <span class="comment">//读入第一条交易记录,并确保有数据可以处理</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">read</span>(total))&#123;</span><br><span class="line">        Sale_data trans;            <span class="comment">//保存和的变量</span></span><br><span class="line">        <span class="comment">//读入并处理剩余交易记录</span></span><br><span class="line">        <span class="keyword">while</span>(cin&gt;&gt;trans)&#123;</span><br><span class="line">            <span class="comment">//如果我们仍在处理相同的书</span></span><br><span class="line">            <span class="keyword">if</span>(total.<span class="built_in">isbn</span>()==trans.<span class="built_in">isbn</span>())</span><br><span class="line">                trans=<span class="built_in">add</span>(trans,total);</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//打印前一本书的结果</span></span><br><span class="line">                <span class="built_in">print</span>(total);</span><br><span class="line">                total=trans;        <span class="comment">//total现在表示下一本书销售额</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//打印最后一本书的结果</span></span><br><span class="line">        <span class="built_in">print</span>(total);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//没有输入!警告读者</span></span><br><span class="line">        cerr&lt;&lt;<span class="string">&quot;No data!?&quot;</span>&lt;&lt;endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="7-8"><a href="#7-8" class="headerlink" title="7.8"></a>7.8</h1><p>read  我们是需要改变给定的Sales_data的值的</p>
<p>但是print只需要输出即可,并不需要改变值.</p>
<h1 id="7-9"><a href="#7-9" class="headerlink" title="7.9"></a>7.9</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::istream &amp;<span class="title">read</span><span class="params">(std::istream &amp;is,Person &amp;item)</span></span>&#123;</span><br><span class="line">    is&gt;&gt;item.name&gt;&gt;item.address;</span><br><span class="line">    <span class="keyword">return</span> ls;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">std::ostream &amp;<span class="title">print</span><span class="params">(std::ostream &amp;os,<span class="type">const</span> Person &amp;item)</span></span>&#123;</span><br><span class="line">    os&lt;&lt;item.name&lt;&lt;item.address;</span><br><span class="line">    <span class="keyword">return</span> os;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="7-10"><a href="#7-10" class="headerlink" title="7.10"></a>7.10</h1><p>因为read函数的返回类型是引用,所以read(cin,data1)的返回值可以继续作为外层的read函数的实参使用,该条件检验读入data1和data2的过程是否正确,如果正确,条件满足,否则条件不满足.</p>
<h1 id="7-11"><a href="#7-11" class="headerlink" title="7.11"></a>7.11</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;istream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Sale_data.h&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// Sale_data add(const Sale_data &amp;lhs,const Sale_data &amp;rhs)&#123;</span></span><br><span class="line"><span class="comment">//     Sale_data sum=lhs;</span></span><br><span class="line"><span class="comment">//     sum.combine(rhs);</span></span><br><span class="line"><span class="comment">//     return sum;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// std::istream &amp;read(std::istream &amp;is,Person &amp;item)&#123;</span></span><br><span class="line"><span class="comment">//     is&gt;&gt;item.name&gt;&gt;item.address;</span></span><br><span class="line"><span class="comment">//     return ls;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// std::ostream &amp;print(std::ostream &amp;os,const Person &amp;item)&#123;</span></span><br><span class="line"><span class="comment">//     os&lt;&lt;item.name&lt;&lt;item.address;</span></span><br><span class="line"><span class="comment">//     return os;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Sales_data</span>&#123;</span><br><span class="line"><span class="keyword">private</span>:            <span class="comment">//定义私有数据成员</span></span><br><span class="line">    string bookNo;  <span class="comment">//书籍编号,隐式初始化为空串</span></span><br><span class="line">    <span class="type">unsigned</span> units_sold=<span class="number">0</span>;      <span class="comment">//销售量,显式初始化为0</span></span><br><span class="line">    <span class="type">double</span> sellingprice=<span class="number">0.0</span>;    <span class="comment">//原始价格,显式初始化为0</span></span><br><span class="line">    <span class="type">double</span> saleprice=<span class="number">0.0</span>;       <span class="comment">//实售价格,显式初始化为0.0</span></span><br><span class="line">    <span class="type">double</span> discount=<span class="number">0.0</span>;        <span class="comment">//折扣.显式初始化为0.0</span></span><br><span class="line">    <span class="built_in">Sales_data</span>()=<span class="keyword">default</span>;       <span class="comment">//默认初始化</span></span><br><span class="line">    <span class="built_in">Sales_data</span>(<span class="type">const</span> string &amp;book) : <span class="built_in">bookNo</span>(book)&#123;&#125; <span class="comment">//参数是一个string,然后把这个string给bookNo赋值</span></span><br><span class="line">    <span class="built_in">Sales_data</span>(<span class="type">const</span> string &amp;book,<span class="type">const</span> <span class="type">unsigned</span> num,<span class="type">const</span> <span class="type">double</span> sellp,<span class="type">const</span> <span class="type">double</span> salep);</span><br><span class="line">    <span class="built_in">Sales_data</span>(istream &amp;is); </span><br><span class="line"><span class="keyword">public</span>:             <span class="comment">//定义共有数据成员</span></span><br><span class="line">    <span class="comment">//isbn函数只有一条语句,返回bookNo</span></span><br><span class="line">    <span class="function">string <span class="title">isbn</span><span class="params">()</span> <span class="type">const</span> </span>&#123;<span class="keyword">return</span> bookNo;&#125;;</span><br><span class="line">    <span class="comment">//combine函数用于把两个ISBN相同的销售记录合并在一起.</span></span><br><span class="line">    <span class="function">Sales_data &amp; <span class="title">combine</span><span class="params">(<span class="type">const</span> Sales_data &amp;rhs)</span></span>&#123;</span><br><span class="line">        units_sold += rhs.units_sold;       <span class="comment">//累加书籍的销售量.</span></span><br><span class="line">        saleprice =(rhs.saleprice*rhs.units_sold+saleprice*units_sold)/(rhs.units_sold+units_sold);     <span class="comment">//重新计算实际销售价格</span></span><br><span class="line">        <span class="keyword">if</span>(saleprice!=<span class="number">0</span>)</span><br><span class="line">            discount=saleprice/sellingprice;                                                            <span class="comment">//重新计算实际折扣</span></span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;                                                                                   <span class="comment">//返回合并后的结果</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Sales_data</span>(<span class="type">const</span> string &amp;book,<span class="type">const</span> <span class="type">unsigned</span> num,<span class="type">const</span> <span class="type">double</span> sellp,<span class="type">const</span> <span class="type">double</span> salep)&#123;</span><br><span class="line">    bookNo=book;</span><br><span class="line">    units_sold=num;</span><br><span class="line">    sellingprice=sellp;</span><br><span class="line">    saleprice=salep;</span><br><span class="line">    <span class="keyword">if</span>(sellingprice!=<span class="number">0</span>)</span><br><span class="line">        discount=saleprice/sellingprice;    <span class="comment">//计算实际折扣</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Sales_data</span>(istream &amp;is)&#123;</span><br><span class="line">    is&gt;&gt;*<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// class Person&#123;</span></span><br><span class="line"><span class="comment">//     string name=&quot;&quot;;</span></span><br><span class="line"><span class="comment">//     string address=&quot;&quot;;</span></span><br><span class="line"><span class="comment">//     string get_name() const  &#123;return name;&#125;;</span></span><br><span class="line"><span class="comment">//     string get_address() const &#123;return address&#125;;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Sales_data data1;</span><br><span class="line">    <span class="function">Sales_data <span class="title">data2</span><span class="params">(<span class="string">&quot;978-7-121-15535-2&quot;</span>)</span></span>;</span><br><span class="line">    <span class="function">Sales_data <span class="title">data3</span><span class="params">(<span class="string">&quot;978-7-121-15535-2&quot;</span>,<span class="number">100</span>,<span class="number">128</span>,<span class="number">109</span>)</span></span>;</span><br><span class="line">    <span class="function">Sales_data <span class="title">data4</span><span class="params">(cin)</span></span>;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;书籍的销售情况是:&quot;</span>&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;data1&lt;&lt;<span class="string">&quot;\n&quot;</span>&lt;&lt;data2&lt;&lt;<span class="string">&quot;\n&quot;</span>&lt;&lt;data3&lt;&lt;<span class="string">&quot;\n&quot;</span>&lt;&lt;data4&lt;&lt;<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="7-12"><a href="#7-12" class="headerlink" title="7.12"></a>7.12</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Sales_data</span>&#123;</span><br><span class="line"><span class="keyword">private</span>:            <span class="comment">//定义私有数据成员</span></span><br><span class="line">    string bookNo;  <span class="comment">//书籍编号,隐式初始化为空串</span></span><br><span class="line">    <span class="type">unsigned</span> units_sold=<span class="number">0</span>;      <span class="comment">//销售量,显式初始化为0</span></span><br><span class="line">    <span class="type">double</span> sellingprice=<span class="number">0.0</span>;    <span class="comment">//原始价格,显式初始化为0</span></span><br><span class="line">    <span class="type">double</span> saleprice=<span class="number">0.0</span>;       <span class="comment">//实售价格,显式初始化为0.0</span></span><br><span class="line">    <span class="type">double</span> discount=<span class="number">0.0</span>;        <span class="comment">//折扣.显式初始化为0.0</span></span><br><span class="line">    <span class="built_in">Sales_data</span>()=<span class="keyword">default</span>;       <span class="comment">//默认初始化</span></span><br><span class="line">    <span class="built_in">Sales_data</span>(<span class="type">const</span> string &amp;book) : <span class="built_in">bookNo</span>(book)&#123;&#125; <span class="comment">//参数是一个string,然后把这个string给bookNo赋值</span></span><br><span class="line">    <span class="built_in">Sales_data</span>(<span class="type">const</span> string &amp;book,<span class="type">const</span> <span class="type">unsigned</span> num,<span class="type">const</span> <span class="type">double</span> sellp,<span class="type">const</span> <span class="type">double</span> salep);</span><br><span class="line">    <span class="built_in">Sales_data</span>(istream &amp;is)&#123;is&gt;&gt;*<span class="keyword">this</span>;&#125;</span><br><span class="line"><span class="keyword">public</span>:             <span class="comment">//定义共有数据成员</span></span><br><span class="line">    <span class="comment">//isbn函数只有一条语句,返回bookNo</span></span><br><span class="line">    <span class="function">string <span class="title">isbn</span><span class="params">()</span> <span class="type">const</span> </span>&#123;<span class="keyword">return</span> bookNo;&#125;;</span><br><span class="line">    <span class="comment">//combine函数用于把两个ISBN相同的销售记录合并在一起.</span></span><br><span class="line">    <span class="function">Sales_data &amp; <span class="title">combine</span><span class="params">(<span class="type">const</span> Sales_data &amp;rhs)</span></span>&#123;</span><br><span class="line">        units_sold += rhs.units_sold;       <span class="comment">//累加书籍的销售量.</span></span><br><span class="line">        saleprice =(rhs.saleprice*rhs.units_sold+saleprice*units_sold)/(rhs.units_sold+units_sold);     <span class="comment">//重新计算实际销售价格</span></span><br><span class="line">        <span class="keyword">if</span>(saleprice!=<span class="number">0</span>)</span><br><span class="line">            discount=saleprice/sellingprice;                                                            <span class="comment">//重新计算实际折扣</span></span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;                                                                                   <span class="comment">//返回合并后的结果</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="7-13"><a href="#7-13" class="headerlink" title="7.13"></a>7.13</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">Sale_data <span class="title">total</span><span class="params">(cin)</span></span>;                                        <span class="comment">//保存下一条交易记录</span></span><br><span class="line">    <span class="comment">//读入第一条交易记录,并确保有数据可以处理</span></span><br><span class="line">    <span class="keyword">if</span>(cin)&#123;</span><br><span class="line">        <span class="function">Sale_data <span class="title">trans</span><span class="params">(cin)</span></span>;            <span class="comment">//保存和的变量</span></span><br><span class="line">        <span class="comment">//读入并处理剩余交易记录</span></span><br><span class="line">        <span class="keyword">do</span>&#123;</span><br><span class="line">            <span class="comment">//如果我们仍在处理相同的书</span></span><br><span class="line">            <span class="keyword">if</span>(total.<span class="built_in">isbn</span>()==trans.<span class="built_in">isbn</span>())</span><br><span class="line">                trans=<span class="built_in">add</span>(trans);</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//打印前一本书的结果</span></span><br><span class="line">                <span class="built_in">print</span>(total);</span><br><span class="line">                total=trans;        <span class="comment">//total现在表示下一本书销售额</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">while</span>(<span class="built_in">read</span>(cin,trans));</span><br><span class="line">        <span class="comment">//打印最后一本书的结果</span></span><br><span class="line">        <span class="built_in">print</span>(total);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//没有输入!警告读者</span></span><br><span class="line">        cerr&lt;&lt;<span class="string">&quot;No data!?&quot;</span>&lt;&lt;endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="7-14"><a href="#7-14" class="headerlink" title="7.14"></a>7.14</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Sale_data</span>(<span class="type">const</span> string &amp;book):<span class="built_in">bookNo</span>(book),<span class="built_in">units_sold</span>(<span class="number">0</span>),<span class="built_in">sellingprice</span>(<span class="number">0</span>),<span class="built_in">saleprice</span>(<span class="number">0</span>),<span class="built_in">discount</span>(<span class="number">0</span>)&#123;&#125;</span><br></pre></td></tr></table></figure>
<h1 id="7-15"><a href="#7-15" class="headerlink" title="7.15"></a>7.15</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    string name=<span class="string">&quot;&quot;</span>;</span><br><span class="line">    string address=<span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Person</span>()=<span class="keyword">default</span>;</span><br><span class="line">    <span class="built_in">Person</span>(<span class="type">const</span> string &amp;name,<span class="type">const</span> string &amp;add)&#123;</span><br><span class="line">        name=name;</span><br><span class="line">        address=add;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Person</span>(istream &amp;is)&#123;is&gt;&gt;*<span class="keyword">this</span>&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">get_name</span><span class="params">()</span> <span class="type">const</span>  </span>&#123;<span class="keyword">return</span> name;&#125;;</span><br><span class="line">    <span class="function">string <span class="title">get_address</span><span class="params">()</span> <span class="type">const</span> </span>&#123;<span class="keyword">return</span> address&#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="7-16"><a href="#7-16" class="headerlink" title="7.16"></a>7.16</h1><p>① 没有,</p>
<p>一般来讲</p>
<p>构造函数和一部分成员函数应该定义在public说明符之后</p>
<p>数据成员合作为实现部分的函数则应该跟在private说明符之后</p>
<h1 id="7-17"><a href="#7-17" class="headerlink" title="7.17"></a>7.17</h1><p>class和struct都可以用来声明类,它们的大多数功能都类似,唯一的区别是默认访问权限不同.</p>
<p>class 第一个定义的访问说明符的成员是private</p>
<p>struct 第一个定义的访问说明符的成员是public</p>
<h1 id="7-18"><a href="#7-18" class="headerlink" title="7.18"></a>7.18</h1><p>封装是指保护类的成员不被随意访问的能力,通过把类的实现细节设置为private</p>
<p>我们就能完成对类的封装,封装实现了接口和实现的分离</p>
<p>如书中所述.</p>
<p>封装有两个重要的优点,一是确保用户代码不会无意间破坏封装对象的状态;二是被封装的类的具体实现细节可以随时改变.而无须调整用户级别的代码。</p>
<p>一旦吧数据定义成为private的,类的作者就可以比较自由的修改数据了.当实现部分发生改变时,只需有检查类的代码本省及确定这次改变有什么影响.</p>
<p>换句话说,只要类的接口不变.用户代码就无须改变.如果数据是public的,则所有使用了原来数据成员的代码都可能失效,这时我们必须定位并重新写所有依赖于老版本实现的代码,之后才能重新使用该程序.</p>
<p>把数据成员的访问权限设为private还有另外的一个好处,这么做能防止由于用户的原因造成数据被破化,如果我们发现有程序缺陷破坏了对象的状态 ,则可以在有限的范围内定位缺陷,因为只有实现部分的代码可能产生这样的错误,因此,个错误的搜索限制在有限范围内将能极大的简化更改问题及修正程序等工作.</p>
<h1 id="7-19"><a href="#7-19" class="headerlink" title="7.19"></a>7.19</h1><p>我们需要把姓名和地址变成private</p>
<p>然后构造函数和接口函数设置为public</p>
<h1 id="7-20"><a href="#7-20" class="headerlink" title="7.20"></a>7.20</h1><p>当非成员函数确实需要访问类的私有成员时,我们可以把他声明为该类的友元,</p>
<p>这时,友元可以  “工作在类的内部”,像类的成员一样访问类的所有数据和函数,但是一旦使用不慎(比如随意设定友元)就有可能破坏类的封装性</p>
<h1 id="7-21"><a href="#7-21" class="headerlink" title="7.21"></a>7.21</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Sales_data</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">friend</span> Sales_data <span class="title">add</span><span class="params">(<span class="type">const</span> Sales_data &amp;lhs,<span class="type">const</span> Sales_data &amp;rhs)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">friend</span> Sales_data istream &amp;<span class="title">read</span><span class="params">(istream &amp;is,<span class="type">const</span> Sales_data &amp;item)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">friend</span> Sales_data ostream &amp;<span class="title">print</span><span class="params">(ostream &amp;os,<span class="type">const</span> Sales_data &amp;item)</span></span>;</span><br><span class="line"><span class="keyword">private</span>:            <span class="comment">//定义私有数据成员</span></span><br><span class="line">    string bookNo;  <span class="comment">//书籍编号,隐式初始化为空串</span></span><br><span class="line">    <span class="type">unsigned</span> units_sold=<span class="number">0</span>;      <span class="comment">//销售量,显式初始化为0</span></span><br><span class="line">    <span class="type">double</span> sellingprice=<span class="number">0.0</span>;    <span class="comment">//原始价格,显式初始化为0</span></span><br><span class="line">    <span class="type">double</span> saleprice=<span class="number">0.0</span>;       <span class="comment">//实售价格,显式初始化为0.0</span></span><br><span class="line">    <span class="type">double</span> discount=<span class="number">0.0</span>;        <span class="comment">//折扣.显式初始化为0.0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="7-22"><a href="#7-22" class="headerlink" title="7.22"></a>7.22</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    string name;</span><br><span class="line">    string address;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Person</span>()=<span class="keyword">default</span>;</span><br><span class="line">    <span class="built_in">Person</span>(<span class="type">const</span> string &amp;name,<span class="type">const</span> string &amp;add)&#123;</span><br><span class="line">        name=name;</span><br><span class="line">        address=add;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Person</span>(istream &amp;is)&#123;is&gt;&gt;*<span class="keyword">this</span>&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">get_name</span><span class="params">()</span> <span class="type">const</span>  </span>&#123;<span class="keyword">return</span> name;&#125;;</span><br><span class="line">    <span class="function">string <span class="title">get_address</span><span class="params">()</span> <span class="type">const</span> </span>&#123;<span class="keyword">return</span> address&#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="7-23"><a href="#7-23" class="headerlink" title="7.23"></a>7.23</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Screen</span>&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">unsigned</span> height=<span class="number">0</span>,width=<span class="number">0</span>;</span><br><span class="line">    <span class="type">unsigned</span> currsor=<span class="number">0</span>;</span><br><span class="line">    string contents;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="7-24"><a href="#7-24" class="headerlink" title="7.24"></a>7.24</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Screen</span>&#123;</span><br><span class="line">    <span class="built_in">Screen</span>() = <span class="keyword">default</span>;          <span class="comment">//这个就是默认的构造函数</span></span><br><span class="line">    <span class="built_in">Screen</span>(<span class="type">const</span> <span class="type">unsigned</span> h,<span class="type">const</span> <span class="type">unsigned</span> w) : <span class="built_in">height</span>(h),<span class="built_in">width</span>(w),<span class="built_in">contents</span>(ht*wd,<span class="string">&#x27; &#x27;</span>) &#123;&#125;;</span><br><span class="line">    <span class="built_in">Screen</span>(<span class="type">const</span> <span class="type">unsigned</span> h,<span class="type">const</span> <span class="type">unsigned</span> w,<span class="type">const</span> <span class="type">char</span> c):  <span class="built_in">height</span>(h),<span class="built_in">width</span>(w),<span class="built_in">contents</span>(ht*wd,C)&#123;&#125;;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">unsigned</span> height=<span class="number">0</span>,width=<span class="number">0</span>;</span><br><span class="line">    <span class="type">unsigned</span> currsor=<span class="number">0</span>;</span><br><span class="line">    string contents;            <span class="comment">//屏幕的内容</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="7-25"><a href="#7-25" class="headerlink" title="7.25"></a>7.25</h1><p>Screen的4个数据成员都是内置类型 (String类定义了拷贝和赋值运算符) ,因此直接使用类对象执行拷贝和赋值操作是可以的.</p>
<h1 id="7-26"><a href="#7-26" class="headerlink" title="7.26"></a>7.26</h1><p>这题是参考的答案.</p>
<h2 id="隐式的内联"><a href="#隐式的内联" class="headerlink" title="隐式的内联"></a>隐式的内联</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Sales_data</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">double</span> <span class="title">avg_price</span><span class="params">()</span> <span class="type">const</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(units_sold)</span><br><span class="line">            <span class="keyword">return</span> revenue/units_sold;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="显示的内联"><a href="#显示的内联" class="headerlink" title="显示的内联"></a>显示的内联</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Sales_data</span>&#123;</span><br><span class="line">    <span class="function"><span class="type">double</span> <span class="title">avg_price</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">inline</span> <span class="type">double</span> Sales_data :: <span class="built_in">avg_price</span>() <span class="type">const</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(units_sold)</span><br><span class="line">            <span class="keyword">return</span> revenue/units_sold;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="7-27"><a href="#7-27" class="headerlink" title="7.27"></a>7.27</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Screen</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Screen</span>() = <span class="keyword">default</span>;          <span class="comment">//这个就是默认的构造函数</span></span><br><span class="line">    <span class="built_in">Screen</span>(<span class="type">const</span> <span class="type">unsigned</span> h, <span class="type">const</span> <span class="type">unsigned</span> w) : <span class="built_in">height</span>(h), <span class="built_in">width</span>(w), <span class="built_in">contents</span>(h* w, <span class="string">&#x27; &#x27;</span>) &#123;&#125;;</span><br><span class="line">    <span class="built_in">Screen</span>(<span class="type">const</span> <span class="type">unsigned</span> h, <span class="type">const</span> <span class="type">unsigned</span> w, <span class="type">const</span> <span class="type">char</span> c) : <span class="built_in">height</span>(h), <span class="built_in">width</span>(w), <span class="built_in">contents</span>(h* w, c) &#123;&#125;;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">unsigned</span> height = <span class="number">0</span>, width = <span class="number">0</span>;</span><br><span class="line">    <span class="type">unsigned</span> currsor = <span class="number">0</span>;</span><br><span class="line">    string contents;            <span class="comment">//屏幕的内容</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">Screen&amp; <span class="title">move</span><span class="params">(<span class="type">unsigned</span> r, <span class="type">unsigned</span> c)</span> </span>&#123;</span><br><span class="line">        currsor = r * width + c;</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Screen&amp; <span class="title">set</span><span class="params">(<span class="type">char</span> ch)</span> </span>&#123;</span><br><span class="line">        contents[currsor] = ch;</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Screen&amp; <span class="title">set</span><span class="params">(<span class="type">unsigned</span> r, <span class="type">unsigned</span> c, <span class="type">char</span> ch)</span> </span>&#123;</span><br><span class="line">        contents[r * width + c] = ch;</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Screen&amp; <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        cout &lt;&lt; contents;</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="function">Screen <span class="title">myScreen</span><span class="params">(<span class="number">5</span>, <span class="number">5</span>, <span class="string">&#x27;X&#x27;</span>)</span></span>;</span><br><span class="line">    myScreen.<span class="built_in">move</span>(<span class="number">4</span>, <span class="number">0</span>).<span class="built_in">set</span>(<span class="string">&#x27;#&#x27;</span>).<span class="built_in">display</span>();</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    myScreen.<span class="built_in">display</span>();</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">XXXXXXXXXXXXXXXXXXXX#XXXX</span><br><span class="line">XXXXXXXXXXXXXXXXXXXX#XXXX</span><br></pre></td></tr></table></figure>
<h1 id="7-28-7-29"><a href="#7-28-7-29" class="headerlink" title="7.28+7.29"></a>7.28+7.29</h1><p>move set display 都不会改变myScreen的值.改变的都只是一个临时的变量.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Screen</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Screen</span>() = <span class="keyword">default</span>;          <span class="comment">//这个就是默认的构造函数</span></span><br><span class="line">    <span class="built_in">Screen</span>(<span class="type">const</span> <span class="type">unsigned</span> h, <span class="type">const</span> <span class="type">unsigned</span> w) : <span class="built_in">height</span>(h), <span class="built_in">width</span>(w), <span class="built_in">contents</span>(h* w, <span class="string">&#x27; &#x27;</span>) &#123;&#125;;</span><br><span class="line">    <span class="built_in">Screen</span>(<span class="type">const</span> <span class="type">unsigned</span> h, <span class="type">const</span> <span class="type">unsigned</span> w, <span class="type">const</span> <span class="type">char</span> c) : <span class="built_in">height</span>(h), <span class="built_in">width</span>(w), <span class="built_in">contents</span>(h* w, c) &#123;&#125;;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">unsigned</span> height = <span class="number">0</span>, width = <span class="number">0</span>;</span><br><span class="line">    <span class="type">unsigned</span> currsor = <span class="number">0</span>;</span><br><span class="line">    string contents;            <span class="comment">//屏幕的内容</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">Screen <span class="title">move</span><span class="params">(<span class="type">unsigned</span> r, <span class="type">unsigned</span> c)</span> </span>&#123;</span><br><span class="line">        currsor = r * width + c;</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Screen <span class="title">set</span><span class="params">(<span class="type">char</span> ch)</span> </span>&#123;</span><br><span class="line">        contents[currsor] = ch;</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Screen <span class="title">set</span><span class="params">(<span class="type">unsigned</span> r, <span class="type">unsigned</span> c, <span class="type">char</span> ch)</span> </span>&#123;</span><br><span class="line">        contents[r * width + c] = ch;</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">Screen&amp; <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        cout &lt;&lt; contents;</span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="function">Screen <span class="title">myScreen</span><span class="params">(<span class="number">5</span>, <span class="number">5</span>, <span class="string">&#x27;X&#x27;</span>)</span></span>;</span><br><span class="line">    myScreen.<span class="built_in">move</span>(<span class="number">4</span>, <span class="number">0</span>).<span class="built_in">set</span>(<span class="string">&#x27;#&#x27;</span>).<span class="built_in">display</span>();</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    myScreen.<span class="built_in">display</span>();</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果如下:</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">XXXXXXXXXXXXXXXXXXXX<span class="meta">#XXXX</span></span><br><span class="line">XXXXXXXXXXXXXXXXXXXXXXXXX</span><br></pre></td></tr></table></figure>
<h1 id="7-30"><a href="#7-30" class="headerlink" title="7.30"></a>7.30</h1><p>通过this指针访问成员的优点是,可以非常明确的指出访问的是对象的成员.并且可以在成员函数中使用与数据成员同名的形参,缺点是显得多余,代码不够简洁.</p>
<h1 id="7-31"><a href="#7-31" class="headerlink" title="7.31"></a>7.31</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">X</span>;                                    <span class="comment">//声明类型X</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Y</span>&#123;                                    <span class="comment">//定义类型Y</span></span><br><span class="line">    X* x;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">X</span>&#123;                                    <span class="comment">//定义类型Y</span></span><br><span class="line">    Y y;</span><br><span class="line">&#125;;  </span><br></pre></td></tr></table></figure>
<h1 id="7-32"><a href="#7-32" class="headerlink" title="7.32"></a>7.32</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Window_mgr</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">clear</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Screen</span>&#123;</span><br><span class="line">    <span class="keyword">friend</span> <span class="type">void</span> Window_mgr:: <span class="built_in">clear</span>();</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">unsigned</span> height=<span class="number">0</span>,width=<span class="number">0</span>;</span><br><span class="line">    <span class="type">unsigned</span> cursor=<span class="number">0</span>;</span><br><span class="line">    string contents;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Screen</span>()=<span class="keyword">default</span>;       <span class="comment">//默认构造函数</span></span><br><span class="line">    <span class="built_in">Screen</span>(<span class="type">unsigned</span> ht,<span class="type">unsigned</span> wd,<span class="type">char</span> c):<span class="built_in">height</span>(ht),<span class="built_in">width</span>(wd),<span class="built_in">contents</span>(ht*wd,c)&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Window_mgr::clear</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="function">Screen <span class="title">myScreen</span><span class="params">(<span class="number">10</span>,<span class="number">20</span>,<span class="string">&#x27;X&#x27;</span>)</span></span>;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;清理之前myScreen的内容是:&quot;</span>&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;myScreen.contents&lt;&lt;endl;</span><br><span class="line">    myScreen.contents=<span class="string">&quot;&quot;</span>;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;清理之后myScreen的内容是:&quot;</span>&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;myScreen.contents&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span></span>&#123;</span><br><span class="line">    Window_mgr w;</span><br><span class="line">    w.<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="7-33"><a href="#7-33" class="headerlink" title="7.33"></a>7.33</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Screen :: pos Screen ::<span class="built_in">size</span>() <span class="type">const</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> height*width;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="7-34"><a href="#7-34" class="headerlink" title="7.34"></a>7.34</h1><p>会导致编译出错,因为对pos的使用出现在它的声明之前.此时编译器并不知道pos到底是什么含义.</p>
<h1 id="7-35"><a href="#7-35" class="headerlink" title="7.35"></a>7.35</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> string Type;        <span class="comment">//string类型</span></span><br><span class="line"><span class="function">Type <span class="title">initVal</span><span class="params">()</span></span>;             <span class="comment">//string类型</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Exercise</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">typedef</span> <span class="type">double</span> Type;    <span class="comment">//double类型</span></span><br><span class="line">    <span class="function">Type <span class="title">setVal</span><span class="params">(Type)</span></span>;      <span class="comment">//double类型</span></span><br><span class="line">    <span class="function">Type <span class="title">initVal</span><span class="params">()</span></span>;         <span class="comment">//double类型</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//double类型</span></span><br><span class="line">Type Exercise :: <span class="built_in">setVal</span>(Type parm)&#123;     </span><br><span class="line">    val=parm+<span class="built_in">initVal</span>();</span><br><span class="line">    <span class="keyword">return</span> val;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>会报错.</p>
<p>修改后的代码如下:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> string Type;        <span class="comment">//string类型</span></span><br><span class="line"><span class="function">Type <span class="title">initVal</span><span class="params">()</span></span>;             <span class="comment">//string类型</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Exercise</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">typedef</span> <span class="type">double</span> Type;    <span class="comment">//double类型</span></span><br><span class="line">    <span class="function">Type <span class="title">setVal</span><span class="params">(Type)</span></span>;      <span class="comment">//double类型</span></span><br><span class="line">    <span class="function">Type <span class="title">initVal</span><span class="params">()</span></span>;         <span class="comment">//double类型</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//double类型</span></span><br><span class="line">Exercise::Type Exercise :: <span class="built_in">setVal</span>(Type parm)&#123;     </span><br><span class="line">    val=parm+<span class="built_in">initVal</span>();</span><br><span class="line">    <span class="keyword">return</span> val;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用作用域运算符强制指定函数的返回值类型.</p>
<h1 id="7-36"><a href="#7-36" class="headerlink" title="7.36"></a>7.36</h1><p>构造函数的初始化,是和数据成员出现的先后顺序有关的,</p>
<p>这题中,rem出现在前,base出现在后.</p>
<p>所以,我们要在构造函数里面也是先初始化rem,在初始化base</p>
<p>这题修改后如下:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">X</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">X</span>(<span class="type">int</span> i,<span class="type">int</span> j): <span class="built_in">base</span>(i),<span class="built_in">rem</span>(base % j)&#123;&#125;</span><br><span class="line">    <span class="type">int</span> base,rem;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="7-37"><a href="#7-37" class="headerlink" title="7.37"></a>7.37</h1><p>① cin的那个使用的是 std::istream &amp; 参数的构造函数,该对象的成员值依赖于用户的输入.</p>
<p>② 用的是默认的构造函数</p>
<p>③ 用的是 const string &amp; 参数的构造函数.bookNo使用实参初始化为”9-999-99999-9”</p>
<p>其他的初始化为0</p>
<h1 id="7-38"><a href="#7-38" class="headerlink" title="7.38"></a>7.38</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Sales_data</span>(std::istream &amp;is=std::cin)&#123;is&gt;&gt;&amp;<span class="keyword">this</span>;&#125;</span><br></pre></td></tr></table></figure>
<p>这时候,</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Sales_data</span>()=<span class="keyword">default</span>;</span><br></pre></td></tr></table></figure>
<p>应该去掉,否则会引起二义性</p>
<h1 id="7-39"><a href="#7-39" class="headerlink" title="7.39"></a>7.39</h1><p>会引起二义性的错误.</p>
<h1 id="7-40"><a href="#7-40" class="headerlink" title="7.40"></a>7.40</h1><p>这题也是参考的.</p>
<p>下面是答案</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span>&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    string Name,ISBN,Author,Publisher;</span><br><span class="line">    <span class="type">double</span> Price=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Book</span>()=<span class="keyword">default</span>;</span><br><span class="line">    <span class="built_in">Book</span>(<span class="type">const</span> string &amp;n,<span class="type">const</span> string &amp;I,<span class="type">double</span> pr,<span class="type">const</span> string &amp;a,<span class="type">const</span> string &amp;p)&#123;</span><br><span class="line">        Name=n;</span><br><span class="line">        ISBN=I;</span><br><span class="line">        Price=pr;</span><br><span class="line">        Author=a;</span><br><span class="line">        Publisher=p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Book</span>(std::istream &amp;is)&#123;is&gt;&gt;*<span class="keyword">this</span>;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Tree的</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Tree</span>&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    string Name;</span><br><span class="line">    <span class="type">unsigned</span> Age=<span class="number">0</span>;</span><br><span class="line">    <span class="type">double</span> Height=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Tree</span>()=<span class="keyword">default</span>;</span><br><span class="line">    <span class="built_in">Tree</span>(<span class="type">const</span> string &amp;n,<span class="type">unsigned</span> a,<span class="type">double</span> h):<span class="built_in">Name</span>(n),<span class="built_in">Age</span>(a),<span class="built_in">Height</span>(h);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="7-41"><a href="#7-41" class="headerlink" title="7.41"></a>7.41</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> std::string;</span><br><span class="line"><span class="keyword">using</span> std::cin;</span><br><span class="line"><span class="keyword">using</span> std::cout;</span><br><span class="line"><span class="keyword">using</span> std::endl;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Sales_data</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">friend</span> std::istream&amp; <span class="title">read</span><span class="params">(std::istream&amp; is, Sales_data&amp; item)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">friend</span> std::ostream&amp; <span class="title">print</span><span class="params">(std::ostream&amp; os, <span class="type">const</span> Sales_data&amp; item)</span></span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Sales_data</span>(<span class="type">const</span> string &amp; book, <span class="type">unsigned</span> num, <span class="type">double</span> sellp, <span class="type">double</span> salep) :<span class="built_in">bookNO</span>(book), <span class="built_in">units_sold</span>(num), <span class="built_in">sellingprice</span>(sellp), <span class="built_in">saleprice</span>(salep) &#123;</span><br><span class="line">        <span class="keyword">if</span> (sellingprice)</span><br><span class="line">            discount = saleprice / sellingprice;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;该构造函数接受书号,销售量,实际售价四个信息&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Sales_data</span>() :<span class="built_in">Sales_data</span>(<span class="string">&quot;&quot;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;该构造函数无须接受任何信息&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Sales_data</span>(<span class="type">const</span> string&amp; book) :<span class="built_in">Sales_data</span>(book, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;该构造函数接受书号信息&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Sales_data</span>(std::istream&amp; is) :<span class="built_in">Sales_data</span>() &#123;</span><br><span class="line">        <span class="built_in">read</span>(is, *<span class="keyword">this</span>);</span><br><span class="line">        cout &lt;&lt;<span class="string">&quot;该构造函数接受用户输入的信息&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    std::string bookNO; <span class="comment">//书籍编号</span></span><br><span class="line">    <span class="type">unsigned</span> units_sold = <span class="number">0</span>; <span class="comment">//销售量</span></span><br><span class="line">    <span class="type">double</span> sellingprice = <span class="number">0.0</span>;    <span class="comment">//原始价格</span></span><br><span class="line">    <span class="type">double</span> saleprice = <span class="number">0.0</span>;   <span class="comment">//实售价格</span></span><br><span class="line">    <span class="type">double</span> discount = <span class="number">0.0</span>;    <span class="comment">//折扣</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function">std::istream&amp; <span class="title">read</span><span class="params">(std::istream&amp; is, Sales_data&amp; item)</span> </span>&#123;</span><br><span class="line">    is &gt;&gt; item.bookNO &gt;&gt; item.units_sold &gt;&gt; item.sellingprice &gt;&gt; item.saleprice;</span><br><span class="line">    <span class="keyword">return</span> is;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">std::ostream&amp; <span class="title">print</span><span class="params">(std::ostream&amp; os,<span class="type">const</span>  Sales_data&amp; item)</span> </span>&#123;</span><br><span class="line">    os &lt;&lt; item.bookNO &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; item.units_sold &lt;&lt; <span class="string">&quot;&quot;</span> &lt;&lt; item.sellingprice &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; item.saleprice &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; item.discount;</span><br><span class="line">    <span class="keyword">return</span> os;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="function">Sales_data <span class="title">fist</span><span class="params">(<span class="string">&quot;978-7-121-15535-2&quot;</span>, <span class="number">85</span>, <span class="number">128</span>, <span class="number">109</span>)</span></span>;</span><br><span class="line">    Sales_data second;</span><br><span class="line">    <span class="function">Sales_data <span class="title">third</span><span class="params">(<span class="string">&quot;978-7-121-15535-2&quot;</span>)</span></span>;</span><br><span class="line">    <span class="function">Sales_data <span class="title">last</span><span class="params">(cin)</span></span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果如下:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">该构造函数接受书号,销售量,实际售价四个信息</span><br><span class="line">该构造函数接受书号,销售量,实际售价四个信息</span><br><span class="line">该构造函数无须接受任何信息该构造函数接受书号,销售量,实际售价四个信息</span><br><span class="line">该构造函数接受书号信息</span><br><span class="line">该构造函数接受书号,销售量,实际售价四个信息</span><br><span class="line">该构造函数无须接受任何信息</span><br><span class="line">a <span class="number">10</span> <span class="number">100</span> <span class="number">85</span></span><br><span class="line">该构造函数接受用户输入的信息</span><br></pre></td></tr></table></figure>
<p>程序先执行受委托构造函数,然后才执行构造函数本身的语句.</p>
<h1 id="7-42"><a href="#7-42" class="headerlink" title="7.42"></a>7.42</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span>&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    string Name,ISBN,Author,Publisher;</span><br><span class="line">    <span class="type">double</span> Price=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Book</span>(<span class="type">const</span> string &amp;n,<span class="type">const</span> string &amp;I,<span class="type">double</span> pr,<span class="type">const</span> string &amp;a,<span class="type">const</span> string &amp;p):</span><br><span class="line">    <span class="built_in">Name</span>(n),<span class="built_in">ISBN</span>(I),<span class="built_in">Price</span>(pr),<span class="built_in">Author</span>(a),<span class="built_in">Publisher</span>(p)&#123;&#125;</span><br><span class="line">    <span class="built_in">Book</span>():<span class="built_in">Book</span>(<span class="string">&quot;&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="number">0</span>,<span class="string">&quot;&quot;</span>,<span class="string">&quot;&quot;</span>)&#123;&#125;</span><br><span class="line">    <span class="built_in">Book</span>(std::istream &amp;is):<span class="built_in">Book</span>()&#123;is&gt;&gt;*<span class="keyword">this</span>;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="7-43"><a href="#7-43" class="headerlink" title="7.43"></a>7.43</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NoDefault</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">NoDefault</span>(<span class="type">int</span> i)&#123;</span><br><span class="line">        val=i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    NoDefault nd;</span><br><span class="line">    <span class="comment">//必须显示调用Nodefault的带参构造函数初始化nd</span></span><br><span class="line">    <span class="built_in">C</span>(<span class="type">int</span> i=<span class="number">0</span>):<span class="built_in">nd</span>(i)&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span></span>&#123;</span><br><span class="line">    C c;    <span class="comment">//使用了类型C的构造函数</span></span><br><span class="line">    cout&lt;&lt;c.nd.val&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="7-44"><a href="#7-44" class="headerlink" title="7.44"></a>7.44</h1><p>不合法,因为NoDefault没有默认的构造函数</p>
<h1 id="7-45"><a href="#7-45" class="headerlink" title="7.45"></a>7.45</h1><p>合法的,因为我们给类型C添加了默认的构造函数</p>
<h1 id="7-46"><a href="#7-46" class="headerlink" title="7.46"></a>7.46</h1><p>(a) 是错误的,类可以不提供任何构造函数,这时,编译器自动实现一个合成的默认构造函数.</p>
<p>(b) 是错误的,如果某个构造函数包含若个形参,但是同时为这些形参都提供了默认实参,则该构造函数也具备默认构造函数的功能.</p>
<p>(c) 是错误的,因为如果一个类没有默认构造函数,也就是说我们定义了该类的某些构造函数但是没有为其设计默认的构造函数,则当编译器确实需要隐式地使用默认构造函数时,该类无法使用,所以一般情况下,都应该为该类构建一个默认构造函数.</p>
<p>(d) 是错误的,对于编译器合成的默认构造函数来说,类类型的成员执行各自所属类的默认构造函数,内置类型和复合类型的成员值只对定义在全局作用于的对象执行初始化.</p>
<h1 id="7-47"><a href="#7-47" class="headerlink" title="7.47"></a>7.47</h1><p>接受一个string参数的Sales_data构造函数应该是explicit的,否则,编译器就有可能自动把一个string对象转换成Sales_data对象,这种做法显得有些随意,某些时候与程序员的初衷相违背</p>
<p>使用explicit的优点是:</p>
<p>避免因隐式类类型转换而带来的意想不到的错误,缺点是当用户需要这样的类类型转换时,不得不使用稍微繁琐的方式来实现.</p>
<h1 id="7-48"><a href="#7-48" class="headerlink" title="7.48"></a>7.48</h1><p>在本题给出的代码中,第一行创建了一个string对象,第二行和第三行都是调用Sales_data的构造函数(该构造函数接受一个string)创建它的对象.</p>
<p>此处无须任何类型转换.所以无论Sales_data的构造函数是不是explicit的,item1和item2都能被正确地创建.它们的bookNo成员都是9-999-99999-9,其他成员都是0</p>
<h1 id="7-49"><a href="#7-49" class="headerlink" title="7.49"></a>7.49</h1><p>(a)是正确的,编译器首先用给定的string对象自动创建一个Sales_data对象,然后这个新生成的临时对象传给combine的形参(类型是Sales_data),函数正确执行并返回结果</p>
<p>(b) 无法编译通过,因为combine函数的参数是一个非常量引用,而s是一个string对象,编译器用s自动创建一个Sales_data临时对象,但是这个新生成的临时对象无法传递给combine所需的非常亮引用,如果我们吧函数声明修改为Sales_data &amp;combine（constant Sales_data) ;</p>
<p>就可以了.</p>
<h1 id="7-50"><a href="#7-50" class="headerlink" title="7.50"></a>7.50</h1><p>我们之前定义的Person含有三个构造函数,因为前两个构造函数接受的参数个数都不是1,所以它们不存在隐式转换的问题,当然也不必指定explicit</p>
<p>Person类的最后一个构造函数</p>
<p>Person(std::istream &amp;is) ; 只接受一个参数,默认情况下,它会把读入的数据自动转换成Person对象.我们更倾向于严格控制Person对象的生成过程,如果确实需要使用Person对象.可以明确的指定.</p>
<p>在其他情况下则不希望自动类型转换的发生,所以应该吧这个构造函数指定为explicit的.</p>
<h1 id="7-51"><a href="#7-51" class="headerlink" title="7.51"></a>7.51</h1><p>string 接受的单参数是const char *类型,如果我们得到了一个常量字符串指针.(字符数组) ,</p>
<p>则把它看作string对象是自然而然的过程,编译器自动把参数类型转换成类类型也非常复合逻辑,因此我们无须指定为explicit的</p>
<p> 与string相反,vecotr接受的单参数是int类型,这个参数的原意是指定vector的容量,如果我们在本来需要vector的地方提供一个int值,并且希望这个int值,自动转换成vector,则这个过程显得比较牵强.因此把vector的单参数构造函数定义成explicit更加合理.</p>
<h1 id="7-52"><a href="#7-52" class="headerlink" title="7.52"></a>7.52</h1><p>这种初始化方式是聚合类的初始化方式.</p>
<p>而我们的Sales_data不是聚合类.</p>
<p>要使用这种初始化的方式的话.我们需要把Sales_data变成聚合类.</p>
<p>下面是代码</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Sales_data</span></span><br><span class="line">&#123;</span><br><span class="line">    string bookNo;</span><br><span class="line">    <span class="type">unsigned</span> units_sold;</span><br><span class="line">    <span class="type">double</span> revenue;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="7-53"><a href="#7-53" class="headerlink" title="7.53"></a>7.53</h1><p>就是讲,用书上的那个</p>
<h1 id="7-54"><a href="#7-54" class="headerlink" title="7.54"></a>7.54</h1><p>不能</p>
<p>这些以constexpr函数只能包含return 语句,不允许执行其他任务.</p>
<h1 id="7-55"><a href="#7-55" class="headerlink" title="7.55"></a>7.55</h1><p>因为Data是聚合类,所以它也是一个字面值常量类.</p>
<h1 id="7-56"><a href="#7-56" class="headerlink" title="7.56"></a>7.56</h1><p>静态成员是指声明之前带有关键字static的类成员,静态成员不是任意单独对象的组成部分，而是由该类的全体对象所共享.</p>
<p>静态成员的优点包括:作用域位于类的范围之内,避免与其他类的成员或者全局作用域的名字冲突；可以是私有成员,而全局变量不可以；通过阅读程序可以非常容易看出静态成员与特定类关联,使得程序的含义清晰明了.</p>
<p>静态成员与普通成员的区别主要体现在普通成员与类的对象关联,是某个具体对象的组成部分；而静态成员不从属于任何具体的对象,它由该类的所有对象共享.</p>
<p>另外,还有一个细微的区别,静态成员可以作为默认实参,而普通数据成员不能作为默认实参.</p>
<h1 id="7-57"><a href="#7-57" class="headerlink" title="7.57"></a>7.57</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Account</span>&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    string strName;</span><br><span class="line">    <span class="type">double</span> dAmount=<span class="number">0.0</span>;</span><br><span class="line">    <span class="type">static</span> <span class="type">double</span> dRate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="7-58"><a href="#7-58" class="headerlink" title="7.58"></a>7.58</h1><p>rate 和vec的初始化是错误的.</p>
<p>example.c 我们必须给出静态成员的初始指.</p>
<h1 id="导图"><a href="#导图" class="headerlink" title="导图"></a>导图</h1><p><img src="https://img-blog.csdnimg.cn/20200721192429579.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0h1YW5ncGVuZ3l1MTIz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/C-Primer/" rel="tag"># C++Primer</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2020/12/14/C++Primer-%E8%AF%BE%E5%90%8E%E4%B9%A0%E9%A2%98-06/" rel="prev" title="C++Primer_课后习题第六章">
                  <i class="fa fa-angle-left"></i> C++Primer_课后习题第六章
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2020/12/14/C++Primer-%E8%AF%BE%E5%90%8E%E4%B9%A0%E9%A2%98-08/" rel="next" title="C++Primer_课后习题第八章">
                  C++Primer_课后习题第八章 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Camille</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
